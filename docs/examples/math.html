<!DOCTYPE html>
<html>
<head>
  <title>Test</title>
</head>
<body>
  <canvas id="game" width="480" height="400"></canvas>
  <script src="../../dist/chs.iife.js"></script>
  <script id="code">
  const topLeft = [20, 20];
  const topRight = [100, 20];
  const bottomLeft = [20, 100];
  const bottomRight = [100, 100];
  const rect = new Rectangle(80, 80);
  rect.setPosition(20, 20);
  rect.setColor(Color.RED);
  rect.rotate(45);
  add(rect);
  const p1 = new Circle(5);
  p1.setPosition(...topLeft);
  const p2 = new Circle(5);
  p2.setPosition(...topRight);
  const p3 = new Circle(5);
  p3.setPosition(...bottomLeft);
  const p4 = new Circle(5);
  p4.setPosition(...bottomRight);
  add(p1);
  add(p2);
  add(p3);
  add(p4);
  const rotX = 60;
  const rotY = 60;

  const c = new Circle(5);
  c.setPosition(rotX, rotY);
  add(c);

  const rotatePoint = ([x, y], [rotX, rotY], angle) => {
    angle = angle * Math.PI / 180;
    return [
      (x - rotX)*Math.cos(angle) - (y - rotY) * Math.sin(angle) + rotX
      ,
      (x - rotX)*Math.sin(angle) + (y - rotY) * Math.cos(angle) + rotY
    ] 
  }
  const topLeftPrime = rotatePoint(topLeft, [rotX, rotY], 45);
  const p1p = new Circle(5);
  p1p.setColor(Color.BLUE) ;
  p1p.setPosition(...topLeftPrime);
  add(p1p);
  const topRightPrime = rotatePoint(topRight, [rotX, rotY], 45);
  const p2p = new Circle(5);
  p2p.setColor(Color.BLUE) ;
  p2p.setPosition(...topRightPrime);
  add(p2p);
  const bottomRightPrime = rotatePoint(bottomRight, [rotX, rotY], 45);
  const p3p = new Circle(5);
  p3p.setColor(Color.BLUE) ;
  p3p.setPosition(...bottomRightPrime);
  add(p3p);
  const bottomLeftPrime = rotatePoint(bottomLeft, [rotX, rotY], 45);
  const p4p = new Circle(5);
  p4p.setColor(Color.BLUE) ;
  p4p.setPosition(...bottomLeftPrime);
  add(p4p);

  </script>
</body>
</html>